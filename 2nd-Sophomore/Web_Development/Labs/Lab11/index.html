<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Лабораторная работа #3</title>
  
  <meta http-equiv="content-type" content="html; Charset=UTF-8" />
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/nav.css">
  <link href='https://fonts.googleapis.com/css?family=Oswald|Lato' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="bower_components/animate.css/animate.min.css">
  
  <script src="bower_components/jquery/dist/jquery.min.js"></script>
  <script src="https://api-maps.yandex.ru/2.1/?lang=ru_RU" type="text/javascript"></script>
  
</head>
<body>
 
  <input type="checkbox" id="op">	
	<div class="nav-button">
	   <label for="op">
	      <i class="fa fa-bars"></i>
	   </label>
	</div>
	
	<div class="overlay-nav">
		<label for="op">
			<i class="fa fa-times"></i>
		</label>
		<nav>
			<ul>
				<li><a href="#intro">Home</a></li>
				<li><a href="#about">Space</a></li>
				<li><a href="#story">Our Story</a></li>
				<li><a href="#pricing">Pricing</a></li>
			</ul>
		</nav>
	</div>
	
  <section id="intro" class="intro">
    <div class="overlay">
      <h1>Coworking zone</h1>
    </div>
    
  </section>
  
  <section id="about" class="about">
    <h2>Free Space</h2>
    <p>Placed just in the middle of the city. An oasis for freelancers, designers, entrepreneurs and all sort of tech-guys. Reserved parking lot, cafe with a bunch of nice food (for vegans too). All registered residents are provided with free coffee.</p>
  </section>  
  
  <!-- Генерировать через JS -->
  <section id="space" class="collection">
  
  </section>
  
  <!-- Модифицировать через JS -->
  <div class="modal">
    <i class="fa fa-times"></i>
    <img src="img/1.jpg" oncontextmenu="return false;">
    <h3 class="caption">Caption</h3>
  </div>
  
  <section id="location" class="location">
    <h2>Atlanta</h2>
    <p class="building">The Biltmore Building</p>
    <p class="street">817 West Peachtree St, Suite 201</p>
    <p class="post">Atlanta, GA 30308</p>
    <p class="number">877.352.6334</p>
  </section>
  
  <div id="map" style="width: 98.5vw; height: 500px"></div>
  <script type="text/javascript">
    ymaps.ready(init);
    var myMap,
        myPlacemark;

    function init(){     
        myMap = new ymaps.Map("map", {
            center: [33.78058874, -84.38339197],
            zoom: 15
        });
      
      myMap.behaviors.disable('scrollZoom');
      
      myPlacemark = new ymaps.Placemark([33.78058874, -84.38339197], { hintContent: 'Atlanta', balloonContent: 'Наша студия, епт' });
    
      myMap.geoObjects.add(myPlacemark);
    }   
  </script>
  
  <section id="story" class="story">
    <div class="img-wrapper">
      <img src="img/story.jpg">
    </div>
    <div class="text-wrapper">
      <h2>Our Story</h2>
      <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Deserunt quos perspiciatis qui optio minus consequatur voluptas, velit tenetur ducimus non nostrum distinctio praesentium vero soluta minima odit similique ratione aliquid. Nemo illum voluptas, earum error odio dolor. Similique qui ea aspernatur ab itaque inventore accusantium. Facilis quaerat, omnis architecto blanditiis.</p>  
    </div>
  </section> 
  
  <section id="pricing" class="pricing">
    <h2>Our Pricing</h2>
    <div class="price">
      <img src="img/Learning%20gear.png" id="firstPic">
      <h3>1 Day - 15$</h3>
      <p>Unlimited americano and esspreso. No seat provided.</p>
    </div>
    
    <div class="price">
     <img src="img/Navigate.png" id="secondPic">
      <h3>1 Week - 59$</h3>
      <p>Unlimited americano and esspreso. No seat provided.</p>
    </div>
    <div class="price">
     <img src="img/Get%20started.png" id="thirdPic">
      <h3>1 Month - 149$</h3>
      <p>Unlimited americano and esspreso. Reserved seat provided.</p>
    </div>
  </section>

  <script>
    // В этой лабе нужно использовать куки для того чтобы сохранять данные формы при перезагрузке страницы
    function setCookie(name, cookie) {
      document.cookie = name + '=' + encodeURIComponent(cookie) + ';max-age=1000';  
    }
    
    function getCookie(name) {
      var cookies = document.cookie.split(';');
      for (var i = 0; i < cookies.length; i++) {
        var c = cookies[i].split('=');
        console.log(c);
        if ($.trim(c[0]) === name) {
          return decodeURIComponent(c[1]);
        }
      }
      return null;
    }
    
    function getFormData() {      
      var dataObject = {};
      dataObject.userName = $("input[name='userName']").val();
      dataObject.userEmail = $("input[name='userEmail']").val();
      dataObject.comment = $("textarea[name='comment']").val();
      return dataObject;
    }
    
    $(document).ready(function() {
      $('.inputsMain').change(function() {
        var cookie = getFormData();
        setCookie('inputs', JSON.stringify(cookie));
      });
      
      var inputCookies = JSON.parse(getCookie('inputs'));
      console.log(inputCookies);
      $('input[name=userName]')[0].value = inputCookies['userName'];
      $('input[name=userEmail]')[0].value = inputCookies['userEmail'];
      $('textarea[name=comment]')[0].value = inputCookies['comment'];
    })
  </script>
  <section id="subscription" class="subscription">
    <form>
      <input class="inputsMain" type="text" name="userName" placeholder="Enter your name">
      <input class="inputsMain" type="email" name="userEmail" placeholder="Enter your email" >
      <textarea class="inputsMain" name="comment" >Leave your wishes</textarea>
      <!-- type="button" to prevent page from reloading -->
      <button type="button" onclick="getFormData()">Send</button>
    </form>
  </section>
  
  <script>
    $(document).ready(function() {
      
//      console.log(document.anchors);
//      console.log(document.links);
//      console.log(document.images);
      
      // Массив с изображениями (для масштабирования)
      var imgs = [
        {
          length: 9
        },
        {
          src: "img/1.jpg",
          caption: "Annual Code Day"
        },
        {
          src: "img/2.jpg",
          caption: "Lections"
        },
        {
          src: "img/3.jpg",
          caption: "Collaboration"
        },
        {
          src: "img/4.jpg",
          caption: "Celebration"
        },
        {
          src: "img/5.jpg",
          caption: "Our Bar"
        },
        {
          src: "img/6.jpg",
          caption: "Art on Walls"
        },
        {
          src: "img/7.jpg",
          caption: "Coffee"
        },
        {
          src: "img/8.jpg",
          caption: "Cookies"
        },
        {
          src: "img/9.jpg",
          caption: "Muffins"
        },
      ];
      
      // Создание элементов и вывод их в документ
      for (var i = 1; i <= imgs[0].length; ++i) {
        var container = document.createElement('div');
        container.className = 'img-wrapper';
        var overlay = document.createElement('div');
        overlay.className = 'overlay';
        var caption = document.createElement('h4');
        caption.innerHTML = imgs[i].caption;
        overlay.appendChild(caption);
        container.appendChild(overlay);
        var img = document.createElement('img');
        img.setAttribute('src', imgs[i].src);
        container.appendChild(img);
        var parent = document.getElementById('space');
        parent.appendChild(container);
      };
      
      $('.collection .img-wrapper').click(function() {
        var src = $('img', this)[0].src;
        $('.modal img').attr('src', src);
        
        var caption = $('.overlay h4', this)[0].innerHTML;
        $('.modal .caption').html(caption);
        
        $('.modal').addClass('open');
      });
      
      $('.modal img').click(function() {
        var l = $(this)[0].src.length;
        var current = parseInt($(this)[0].src[l-5]);
        if (current < imgs[0].length)
          current++;
        else
          current = 1;
        var initSrc = $(this)[0].src;
        var newSrc = initSrc.substr(0, 32) + current.toString() + initSrc.substr(33);
        $(this)[0].src = newSrc;
        
        $('.modal .caption').html(imgs[current].caption);
      });
      
      $('.modal img').mousedown(function(e) {
        if (e.button == 2) {
          var l = $(this)[0].src.length;
          var current = parseInt($(this)[0].src[l-5]);
          if (current > 1)
            current--;
          else
            current = imgs[0].length;
          var initSrc = $(this)[0].src;
          var newSrc = initSrc.substr(0, 32) + current.toString() + initSrc.substr(33);
          console.log(newSrc);
          $(this)[0].src = newSrc;
          
          $('.modal .caption').html(imgs[current].caption);
        }        
      });
      
      $('.modal i').click(function() {
        $('.modal').removeClass('open');
      });
      
//      thirdPic.addEventListener("dblclick", function() {
//        console.log("You clicked me, dude!");
//      });
      
      $('#firstPic').click(function() {
        console.log('First pic clicked!')
      });      
      
      secondPic.ondrag = function() {
        console.log('Do not drag me!');
      };
      
      $('#thirdPic').dblclick(function() {
        console.log('You clicked me, dude!');
      });
      
      // Scroll down the pages
      $.fx.speeds.andanto = 1500;
      $('.overlay h1').click(function() {
        $('html, body').animate({
          scrollTop: $('#about').offset().top
        }, $.fx.speeds.andanto, function() {
          $('.about h2').addClass('swing animated');
        });
      });

      // Close menu
      $('.overlay-nav a').on('click', function() {
        $('#op').attr("checked", false);
      });
    });
  </script>
</body>
</html>